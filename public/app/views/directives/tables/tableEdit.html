<div>
	<div ng-repeat="error in errors" class="alert alert-danger">
		{{error.msg}}
	</div>
	<div ng-repeat="error in errors" class="alert alert-danger">
		{{error.msg}}
	</div>
	<br>

	<div class="full" >
		<!--filter-properties section-type={{sectionType}}></filter-properties-->
		<properties-filter-by-month section-type="{{sectionType}}"></properties-filter-by-month>
	</div>

	<div class="full text-center"  ng-if="dataLength==0">
		<h2>No hay datos para el criterio establecido.</h2>
	</div>

	<div ng-if="dataLength>0">
		<div class="table-responsive table-striped  table-hover full text-center borders" ng-repeat="year in allYears">
			<h3>{{year}}</h3>
			<table class="table well" >
				<thead>
					<tr>
						<th class="text-center">Cantidad de cuartos</th>
						<th class="text-center">Facturación</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td class="text-center">{{formater.toNumberFormat(yearTotals[year].bedroom_count)}}</td>
						<td class="text-center">${{formater.toNumberFormat(yearTotals[year].amount)}}</td>
					</tr>
				</tbody>
			</table>
			<table  ng-if="dataLength > 0" class="table well" ng-repeat="(numMonth,month) in months">
				<caption class="text-center">{{month}}</caption>
				<thead>
					<tr>
						<th ng-if="editable">Acciones</th>
						<th class="text-center">Canal</th>
						<th class="text-center">Cantidad de cuartos</th>
						<th class="text-center">Facturación</th>
					</tr>
				</thead>
				<tbody>
					<tr ng-repeat="(channelId, channelYearData) in tableData[year]">
						<td ng-if="editable">
							<!--div>
								Edición habilitada solo para un canal
							</div-->
							<div>
								<div ng-if="!editing[year][numMonth]" >
									<button ng-click='onEditClick(year, numMonth)' class="btn btn-info btn-lg btn-actions">
										<span class="glyphicon glyphicon-edit"></span> Editar
									</button>
								</div>
								<div ng-if="editing[year][numMonth]" >
									<button ng-click='onSaveClick(year, numMonth)' class="btn btn-success btn-lg btn-actions">
										<span class="glyphicon glyphicon-edit"></span> Guardar
									</button>
								</div>
							</div>
						</td>
						<td>{{channels[channelId].name}}</td>
						<td ng-if="editable">
							<input class="text-center" type="text" name="" 
							ng-model="tableData[year][channelId][numMonth].bedroom_count"
							ng-readonly="!editing[year][numMonth]">
						</td>
						<td ng-if="editable">
							<input class="text-center" type="text" name="" 
							ng-model="tableData[year][channelId][numMonth].amount"
							ng-readonly="!editing[year][numMonth]">
						</td>
						<td ng-if="!editable">
							{{tableData[year][channelId][numMonth].bedroom_count}}
						</td>
						<td ng-if="!editable">
							${{tableData[year][channelId][numMonth].amount}}
						</td>
					</tr>
					<tr>
						<td ng-if="editable"></td>
						<td>Total</td>
						<td>{{monthlyTotals[year][numMonth].bedroom_count}}</td>
						<td>${{monthlyTotals[year][numMonth].amount}}</td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>
</div>

